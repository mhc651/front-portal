{"version":3,"sources":["webpack:///./src/assets/images/bkm.png","webpack:///src/views/Login/Index.vue","webpack:///./src/views/Login/Index.vue?23f3","webpack:///./src/views/Login/Index.vue"],"names":["module","exports","__webpack_require__","p","Index","name","computed","extends_default","Object","vuex_esm","data","tagsname","ca_error","post","serRandom","sessionKey","formInline","user","password","code","code_error","login_error","ruleInline","required","message","trigger","mounted","this","mathRandow","handleRefreshCode","created","toTabPane2","methods","$route","query","tag","s","i","substr","Math","floor","random","join","document","getElementById","src","loginInfo","_this","now_uuid","common","reuuid","sessionStorage","getItem","setItem","login","username","vcode","then","res","status","org_type","$router","push","err","errcode","errmsg","handleSubmit","_this2","$refs","validate","valid","verifPicCode","success","getCertBsf","textCertID","ret","obj","SOF_Login","SOF_GetUserList","len","length","SOF_ExportUserCert","sign","SOF_SignData","strData","strSign","strCert","caLogin","_this3","objks","object","getRandom","content","updata","console","log","stringify_default","caLogins","getOrgStatus","getServerRandom","Login_Index","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","overflow","attrs","_v","value","label","ref","model","rules","prop","placeholder","callback","$$v","$set","expression","type","to","width","height","id","on","click","_s","_e","disabled","size","long","$event","keyup","_k","keyCode","key","color","href","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.38eabd028c1412cb6cca.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/bkm.234806c.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/bkm.png\n// module id = UhfL\n// module chunks = 5","\n\n<style lang=\"scss\" scoped>\n\n.login {\n  background: url('../../assets/images/login_bgn.jpg') center no-repeat;\n  background-size: 1920px;\n  background-position: center center;\n}\n.login .container {\n  position: relative;\n  height: 100%;\n}\n// 内容\n.login-main {\n  position: absolute;\n  right: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  border-radius: 10px;\n  width: 398px;\n  box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.1);\n  background: rgba(255, 255, 255, 1);\n  .tabs {\n    margin-bottom: 20px;\n    span {\n      border-right: 1px solid #dfdfdf;\n      font-size: 18px;\n      color: #606266;\n      display: inline-block;\n      padding-right: 18px;\n      cursor: pointer;\n      font-weight: bold;\n      &:hover {\n        color: #398bf1;\n      }\n      &:last-child {\n        padding-left: 18px;\n        border: 0;\n      }\n    }\n    span.active {\n      color: #398bf1;\n    }\n  }\n  .ivu-form-item {\n    margin-bottom: 25px;\n  }\n  .login_btn,\n  .input {\n    height: 40px;\n    font-size: 14px;\n    //box-shadow: 0 0 100px 2px rgba(0, 0, 0, 0.1);\n  }\n\n\n\n}\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-control {\n  height: 44px;\n}\n\n.input_remove {\n  cursor: pointer;\n  pointer-events: auto;\n  top: 7px;\n  right: 7px;\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n  border-radius: 50%;\n  background-color: rgba(200, 200, 200, 0.2);\n  font-size: 11px;\n}\n\n.from_code {\n  width: 124px;\n  height: 40px;\n  float: right;\n  overflow: hidden;\n  cursor: pointer;\n}\n// 忘记密码\n.form-checkbox {\n  input {\n    vertical-align: top;\n  }\n  label {\n    color: #1686ea;\n    cursor: pointer;\n    font-weight: normal;\n  }\n  a {\n    color: #000;\n    float: right;\n    &:hover {\n      color: #1686ea;\n      text-decoration: none;\n    }\n  }\n}\n// 注册\n.a_register {\n  text-align: center;\n  a {\n    border: 1px solid #1686ea;\n    display: inline-block;\n    padding-left: 15px;\n    padding-right: 15px;\n    height: 30px;\n    line-height: 28px;\n    border-radius: 15px;\n    margin-left: 5px;\n    &:hover {\n      text-decoration: none;\n      color: #1686ea;\n    }\n  }\n}\n// CA\n.login-ca {\n  height: 200px;\n  background: #FAFAFA;\n  margin-bottom: 28px;\n  padding: 20px;\n}\n\n.login_ca_p {\n  padding: 0 26px;\n  text-align: center;\n  font-size: 14px;\n}\n\n.login-error {\n  color: red;\n  font-size: 14px;\n  text-align: center;\n  height: 30px;\n  line-height: 30px;\n}\n</style>\n<style lang=\"scss\">\n.login {\n  .ivu-tabs-nav {\n    width: 100%;\n  }\n  .ivu-tabs-tabpane {\n    padding: 0 20px 20px 20px;\n  }\n  .ivu-tabs-bar .ivu-tabs-tab {\n    width: 50%;\n    padding: 13px;\n    margin-right: 0;\n    text-align: center;\n    font-weight: bold;\n    font-size: 20px;\n    //box-shadow: 0 -10px 25px 5px rgba(0, 0, 0, 0.1) inset;\n    background-image: url(\"../../assets/images/ilgbk.png\");\n    background-repeat: repeat-x;\n    border-radius: 10px;\n    border:1px solid #DCDFE6;\n    height: 53px;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border-top: none;\n  }\n\n  .nav-text div:nth-child(3){\n    border-top-left-radius: 0;\n    margin-right: -1px;\n    border-right: none;\n    margin-bottom: 2px;\n  }\n  .nav-text div:nth-child(2){\n    border-top-right-radius: 0;\n    border-left: none;\n    margin-bottom: 2px;\n  }\n  .ivu-tabs-tab.ivu-tabs-tab-active {\n    //box-shadow: none;\n    background:url(#);\n    border:none;\n  }\n  .ivu-tabs-bar {\n    border: 0 none;\n    margin-bottom: 25px;\n  }\n  .ivu-tabs-ink-bar {\n    height: 0;\n    display: none;\n  }\n  .fgpw{\n    float: right;\n    margin: -30px 10px 0 0;\n    position: relative;\n    z-index: 10;\n    border-left: 1px solid #E4E7ED;\n    height: 20px;\n    line-height: 20px;\n    padding-left: 10px;\n  }\n  .bkm{\n    position: absolute;\n    left: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 780px;\n  }\n}\n.ivu-input {\n  box-shadow: 0px 2px 3px 0px #eee inset;\n}\n\n.register-model .ivu-btn-text,.register-model  .ivu-btn-primary {\n  display: none;\n}\n.calogintip{font-size: 14px;color: #606266;margin: 40px auto 0 auto;}\n.caerror{font-size: 12px;margin: 0 auto;color:#E83611;min-width: 200px;text-align: center}\n.caloginbtn{width: 270px;margin: 0px auto 0 auto;}\n\n</style>\n\n\n<template>\n<section class=\"login container--fluid\" style=\"overflow: hidden\">\n  <div class=\"container \">\n    <img class=\"bkm\" src=\"../../assets/images/bkm.png\">\n    <div class=\"login-main\">\n      <Tabs  :value=\"tagsname\">\n        <TabPane label=\"账号登录\" name=\"name1\">\n            <Form ref=\"formInlines\" :model=\"formInline\" :rules=\"ruleInline\" >\n              <FormItem prop=\"user\">\n              <Input class=\"input\" v-model=\"formInline.user\" placeholder=\"账号\"/>\n              </FormItem>\n              <FormItem prop=\"password\">\n              <Input class=\"input\" v-model=\"formInline.password\" type=\"password\" placeholder=\"请输入密码\"/>\n                <div class=\"fgpw\"><router-link class=\"pull-right\" to=\"/newpassword\">忘记密码</router-link></div>\n              </FormItem>\n              <FormItem prop=\"code\">\n              <Input class=\"input\" v-model=\"formInline.code\" placeholder=\"输入验证码\" style=\"width: 220px\"/>\n                <!--<img @click=\"handleRefreshCode\" :src=\"qcode.data\" alt=\"\" class=\"from_code\">-->\n                <!--<img @click=\"handleRefreshCode\" id=\"verify\" class=\"from_code\" src='/dws/pub/vcode?sessionKey=11' />-->\n                <img @click=\"handleRefreshCode\" width=\"80\" height=\"30\" :src=\"'/dws/pub/vcode/img'\" class=\"from_code\" id=\"verify\"/>\n              <!--<a href=\"#\" class=\"from_code\">验证码</a>-->\n              </FormItem>\n            <!--<div class=\"form-group form-checkbox clearfix\">-->\n              <!--<label class=\"pull-left\">-->\n                <!--<Checkbox v-model=\"single\"> 记住登录状态</Checkbox>-->\n              <!--</label>-->\n               <!--<router-link class=\"pull-right\" to=\"/newpassword\">忘记密码 ？</router-link>-->\n            <!--</div>-->\n              <div class=\"login-error\" v-if=\"login_error\">\n                {{ login_error }}\n              </div>\n              <FormItem>\n\n              <Button :disabled='post' class=\"login_btn\" type=\"primary\" size=\"large\" long @click=\"handleSubmit('formInlines')\" @keyup.enter=\"handleSubmit('formInlines')\">\n                立即登录\n              </button>\n              </FormItem>\n            <!-- <div class=\"a_register\">\n              没有账号，我要\n              <router-link to=\"/register\">企业注册\n                <Icon style=\"margin-left: 5px\" type=\"arrow-right-c\"></Icon>\n              </router-link>\n              <router-link to=\"/register?m=1\">医疗机构注册\n                <Icon style=\"margin-left: 5px\" type=\"arrow-right-c\"></Icon>\n              </router-link>\n            </div> -->\n            </Form>\n        </TabPane>\n        <!-- ca -->\n        <TabPane label=\"CA登录\" name=\"name2\">\n            <div class=\"login-ca flex align-items--center\">\n              <div style=\"\" class=\"calogintip\">登录前请检查是否已安装CA证书客户端</div>\n              <Button type=\"primary\"  class=\"login_btn caloginbtn\"  size=\"large\" long @click=\"caLogin\" style=\"\">\n                立即登录\n              </button>\n              <div class=\"caerror\">{{ca_error}}</div>\n            </div>\n\n            <!--<OBJECT id=\"obj\" name=\"obj\" classid=\"CLSID:093EA822-9C5D-4D46-883E-3421A93DCCF8\" codebase=\"FJCAApi.ocx\" style=\"LEFT: 0px; TOP: 0px\" height=\"12\" width=\"12\"></OBJECT>-->\n            <p class=\"login_ca_p\">首次登录时，请下载并安装 “<a href=\"#\" style=\"color: #1686EA\">CA证书客户端</a>” 仅支持IE浏览器</p>\n        </TabPane>\n      </Tabs>\n      <!-- ca end-->\n    </div>\n  </div>\n</section>\n</template>\n<script>\nimport { mapActions, mapState } from 'vuex'\nimport uuids from '../../assets/js/common'\nexport default {\n  name: 'Login',\n  computed: {\n    ...mapState(['qcode'])\n  },\n  data() {\n    return {\n      tagsname:'name1',\n      ca_error:'',\n      post: false,\n      serRandom: 123,\n      sessionKey: '110',\n      // login data\n      formInline: {\n        user: '',\n        password: '',\n        code: ''\n      },\n      code_error:'',\n      // 错提示\n      login_error: '',\n      // login validate\n      ruleInline: {\n        user: [\n          { required: true, message: '请输入账号', trigger: 'blur' }\n        ],\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n        code: [{ required: true, message: '请输入验证码', trigger: 'blur' }]\n      }\n    }\n  },\n  mounted() {\n    this.sessionKey = this.mathRandow()\n    this.handleRefreshCode()\n  },\n  created() {\n    this.toTabPane2()\n  },\n  methods: {\n    ...mapActions(['getqcode', 'login', 'verifPicCode', 'getRandom', 'caLogins', 'getOrgStatus']),\n    toTabPane2() {\n      let tag = this.$route.query.tag;\n      if(tag=='ca'){\n        this.tagsname = 'name2'\n      }\n    },\n    mathRandow() {\n      var s = [];\n      var hexDigits = \"0123456789abcdef\";\n      for (var i = 0; i < 36; i++) {\n        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n      }\n      s[14] = \"4\";\n      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\n      s[8] = s[13] = s[18] = s[23] = \"-\";\n      var uuid = s.join(\"\");\n      return uuid;\n    },\n    handleRefreshCode() {\n      document.getElementById(\"verify\").src = \"/dws/pub/vcode/img?sessionKey =\"+ this.mathRandow()\n    },\n    loginInfo() {\n      const now_uuid = uuids.reuuid()\n      if(sessionStorage.getItem(\"uuid\")==null){\n        sessionStorage.setItem(\"uuid\",now_uuid)\n      }\n      this.login({\n        // 帐号\n        username: this.formInline.user,\n        // 用户填写的验证码\n        vcode: this.formInline.code,\n        // 验证码的标识\n        //vcodekey: this.qcode.key,\n        // 密码\n        password: this.formInline.password\n      }).then(\n        res => {\n          if (res) {\n            switch (res.status) {\n              case 'ORG_NOT_AUDIT_PASS':/*机构还未审核通过*/\n                if(res.org_type=='HOS'){ /*医疗机构*/\n                  this.$router.push('/review?mode=1')\n                }else if(res.org_type=='DIS'){/*生产企业*/\n                  this.$router.push('/review?mode')\n                }\n                //this.$router.push('/resubmitInfo')\n                break\n              case 'ORG_NOT_COMMIT_APPLY':/*机构还未提交审核*/\n                if(res.org_type=='HOS'){ /*医疗机构*/\n                  this.$router.push('/register1?reset=1&flag=0')\n                }else if(res.org_type=='DIS'){/*生产企业*/\n                  this.$router.push('/register?reset=1&flag=0')\n                }\n                //this.$router.push('/auditcheck')\n                break\n              case 'ORG_AUDIT_PASS':/*机构已审核通过*/\n                this.$router.push('/app')\n                //this.$router.push('/reviewing')\n                break\n              case 'NOT_BINDING_CA':/*管理单位生产企业审核通过未绑定CA*/\n                this.$router.push('/compBindCa')\n                break\n              default:\n                //this.$router.push('/review')\n            }\n          }\n        },\n        err => {\n          if(err){\n            switch (err.errcode) {\n              case 'NOT_BINDING_CA':/*管理单位生产企业审核通过未绑定CA*/\n                this.$router.push('/compBindCa')\n                break\n              default:\n                //this.$router.push('/review')\n            }\n          }\n          this.post = false\n          // 提示错误\n          this.login_error = err.errmsg\n          this.handleRefreshCode()\n        }\n      )\n    },\n    // 登录\n    handleSubmit(name) {\n      this.$refs[name].validate(valid => {\n          // 提交拦截\n        if (valid) {\n          this.post = true\n          this.verifPicCode({code:this.formInline.code}).then(res => {\n            if(res.success){\n              this.loginInfo()\n            }else {\n              this.login_error = res.errmsg\n              this.post = false\n            }\n          })\n\n        }\n\n      })\n    },\n    getCertBsf() {\n      var textCertID=\"\";\n      var ret = obj.SOF_Login('','');\n      if (ret != 0)\n      {\n        this.ca_error = \"未检测到UKey或Ukey未登陆\"\n        //alert(obj.SOF_GetReturnString());\n        return;\n      }\n      var ret = obj.SOF_GetUserList();\n      if (ret == \"\")\n      {\n        //alert(obj.SOF_GetReturnString());\n        return;\n      }\n      var len = ret.length;\n      var len2 = '38';\n      var str2 = ret.substr(len-len2,len2);\n      textCertID = str2;\n      var ret = obj.SOF_ExportUserCert(textCertID);\n      if (ret == \"\")\n      {\n        //alert(obj.SOF_GetReturnString());\n        return;\n      }\n      var sign = obj.SOF_SignData(textCertID, this.serRandom);\n      if (sign == \"\")\n      {\n        //alert(obj.SOF_GetReturnString());\n        return;\n      }\n       let params = {\n        strData: this.serRandom,\n        strSign: sign,\n        strCert: ret,\n      }\n      return params\n    },\n    caLogin() {\n      var objks = document.getElementById(\"obj\");\n      if (objks == null || objks.object == null){\n        this.ca_error = \"您未使用新版证书或未正确安装证书驱动\";\n        return false;\n      } else {\n        this.ca_error = \"\";\n      }\n      const now_uuid = uuids.reuuid()\n      if(sessionStorage.getItem(\"uuid\")==null){\n        sessionStorage.setItem(\"uuid\",now_uuid)\n      }\n      this.getRandom().then(res => {\n        this.serRandom = res.content\n        let updata = this.getCertBsf()\n        //updata.testExpired = true\n        console.log(\"ca登陆上传参数: \"+JSON.stringify(updata))\n        if(updata){\n          this.caLogins(updata).then(\n            res => {\n              console.log(JSON.stringify(res))\n              if(res.success){\n                this.getOrgStatus().then(res => {\n                  console.log(\"orgstatus: \"+JSON.stringify(res))\n                })\n                this.$router.push('/app')\n              }\n            },\n            err => {\n              console.log(err)\n              if(err.errcode=='CA_CERT_UNBINDING'){\n                this.ca_error = \"“UKey”未在系统注册！\";\n              }else if(err.errcode=='CA_CERT_EXPIRED'){\n                this.ca_error = \"UKey证书已过期\";\n              }else if(err.errcode=='CA_ERROR_LOGIN'){\n                this.ca_error = \"登录KEY出错！\";\n              }else if(err.errcode=='CA_CERT_ERROR'){\n                this.ca_error = \"证书错误！\";\n              }else if(err.errcode=='USER_DISABLED'){\n                this.ca_error = \"用户被禁用\";\n              }else if(err.errcode=='ORG_NOT_FOUND'){\n                this.ca_error = \"机构不存在\";\n              }else if(err.errcode=='ORG_NOT_VALID'){\n                this.ca_error = \"机构已过期\";\n              }else if(err.errcode=='ORG_FORBIDED'){\n                this.ca_error = \"机构被禁用\";\n              }\n              //console.log(JSON.stringify(res))\n            }\n          )\n        }\n      })\n    },\n    getServerRandom() {\n      this.getRandom().then(res => {\n        console.log(JSON.stringify(res))\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped src=\"./login.scss\" ></style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Login/Index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"login container--fluid\",staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"container \"},[_c('img',{staticClass:\"bkm\",attrs:{\"src\":require(\"../../assets/images/bkm.png\")}}),_vm._v(\" \"),_c('div',{staticClass:\"login-main\"},[_c('Tabs',{attrs:{\"value\":_vm.tagsname}},[_c('TabPane',{attrs:{\"label\":\"账号登录\",\"name\":\"name1\"}},[_c('Form',{ref:\"formInlines\",attrs:{\"model\":_vm.formInline,\"rules\":_vm.ruleInline}},[_c('FormItem',{attrs:{\"prop\":\"user\"}},[_c('Input',{staticClass:\"input\",attrs:{\"placeholder\":\"账号\"},model:{value:(_vm.formInline.user),callback:function ($$v) {_vm.$set(_vm.formInline, \"user\", $$v)},expression:\"formInline.user\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"password\"}},[_c('Input',{staticClass:\"input\",attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.formInline.password),callback:function ($$v) {_vm.$set(_vm.formInline, \"password\", $$v)},expression:\"formInline.password\"}}),_vm._v(\" \"),_c('div',{staticClass:\"fgpw\"},[_c('router-link',{staticClass:\"pull-right\",attrs:{\"to\":\"/newpassword\"}},[_vm._v(\"忘记密码\")])],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"code\"}},[_c('Input',{staticClass:\"input\",staticStyle:{\"width\":\"220px\"},attrs:{\"placeholder\":\"输入验证码\"},model:{value:(_vm.formInline.code),callback:function ($$v) {_vm.$set(_vm.formInline, \"code\", $$v)},expression:\"formInline.code\"}}),_vm._v(\" \"),_c('img',{staticClass:\"from_code\",attrs:{\"width\":\"80\",\"height\":\"30\",\"src\":'/dws/pub/vcode/img',\"id\":\"verify\"},on:{\"click\":_vm.handleRefreshCode}})],1),_vm._v(\" \"),(_vm.login_error)?_c('div',{staticClass:\"login-error\"},[_vm._v(\"\\n                \"+_vm._s(_vm.login_error)+\"\\n              \")]):_vm._e(),_vm._v(\" \"),_c('FormItem',[_c('Button',{staticClass:\"login_btn\",attrs:{\"disabled\":_vm.post,\"type\":\"primary\",\"size\":\"large\",\"long\":\"\"},on:{\"click\":function($event){_vm.handleSubmit('formInlines')},\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }_vm.handleSubmit('formInlines')}}},[_vm._v(\"\\n                立即登录\\n              \")])],1)],1)],1),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":\"CA登录\",\"name\":\"name2\"}},[_c('div',{staticClass:\"login-ca flex align-items--center\"},[_c('div',{staticClass:\"calogintip\"},[_vm._v(\"登录前请检查是否已安装CA证书客户端\")]),_vm._v(\" \"),_c('Button',{staticClass:\"login_btn caloginbtn\",attrs:{\"type\":\"primary\",\"size\":\"large\",\"long\":\"\"},on:{\"click\":_vm.caLogin}},[_vm._v(\"\\n                立即登录\\n              \")]),_vm._v(\" \"),_c('div',{staticClass:\"caerror\"},[_vm._v(_vm._s(_vm.ca_error))])],1),_vm._v(\" \"),_c('p',{staticClass:\"login_ca_p\"},[_vm._v(\"首次登录时，请下载并安装 “\"),_c('a',{staticStyle:{\"color\":\"#1686EA\"},attrs:{\"href\":\"#\"}},[_vm._v(\"CA证书客户端\")]),_vm._v(\"” 仅支持IE浏览器\")])])],1)],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-acffae9c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/Login/Index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-acffae9c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./Index.vue\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-acffae9c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=1!./Index.vue\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-acffae9c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!./login.scss\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./Index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./Index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-acffae9c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./Index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-acffae9c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Login/Index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}